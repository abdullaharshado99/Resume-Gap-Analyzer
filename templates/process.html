<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Smart CV Gap Analyzer</title>
  <link rel="icon" type="image/png" href="{{ url_for('static', filename='images/favicon.png') }}" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <script src="https://cdn.tailwindcss.com"></script>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css" rel="stylesheet" />
  <style>
    body {
      background: linear-gradient(135deg, #667eea, #764ba2);
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    }

    header {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      z-index: 100;
      background: white;
      box-shadow: 0 2px 6px rgba(0, 0, 0, 0.1);
    }

    input[type="file"]::file-selector-button {
      padding: 0.5rem 1rem;
      background-color: #6366f1;
      color: white;
      border: none;
      border-radius: 0.375rem;
      cursor: pointer;
    }
  </style>
</head>
<body class="min-h-screen">

  <!-- Navbar -->
<header class="bg-white shadow py-3 px-4 sticky top-0 z-50">
  <div class="container mx-auto flex justify-between items-center">
    <h1 class="text-xl font-bold text-indigo-700">AI Career Assistant</h1>

    <nav class="hidden md:flex space-x-6 text-indigo-700 font-semibold">
      <a href="/" class="text-decoration-none"><i class="bi bi-house-door-fill"></i> Home</a>
      <a href="#" title="Logout" onclick="confirmLogout()" class="text-red-600 hover:text-red-800">
        <i class="bi bi-box-arrow-right"></i> Logout
      </a>
    </nav>

    <div class="md:hidden flex items-center space-x-4">
      <!-- Hamburger icon: toggles home/logout menu -->
      <button id="navToggleBtn" aria-label="Toggle Menu" class="text-indigo-700 text-2xl">
        <i class="bi bi-list"></i>
      </button>

      <!-- Mobile button menu (3 dots): toggles history sidebar -->
      <button id="historyToggleBtn" aria-label="Toggle History" class="text-indigo-700 text-2xl">
        <i class="bi bi-three-dots-vertical"></i>
      </button>
    </div>

    <!-- Mobile navigation menu -->
    <div id="mobileMenu" class="absolute right-0 mt-12 w-48 bg-white rounded-md shadow-lg hidden z-50">
      <a href="/" class="block px-4 py-2 text-indigo-700 hover:bg-gray-100"><i class="bi bi-house-door-fill"></i> Home</a>
      <a href="#" onclick="confirmLogout()" class="block px-4 py-2 text-red-600 hover:text-red-800">
        <i class="bi bi-box-arrow-right"></i> Logout
      </a>
    </div>
  </div>
</header>


  <!-- Main Content -->
  <main class="flex px-4 pt-28 pb-12 justify-center min-h-[80vh]">

    <!-- Resume History Sidebar -->
    <aside id="historySidebar"
           class="bg-indigo-100 rounded-xl p-4 shadow-lg overflow-y-auto max-h-[80vh]
                  w-64 fixed left-0 top-20 bottom-12
                  hidden md:block z-40">
      <h2 class="text-xl font-semibold text-indigo-700 mb-4">Resume History</h2>
      <ul id="resumeList" class="space-y-2">
        {% if user_data|length == 0 %}
          <li class="text-indigo-600 italic">No History, Upload your resume</li>
        {% else %}
          {% for resume in user_data %}
          <li>
            <button onclick="loadResume({{ resume.id }})"
                    class="w-full text-left px-3 py-2 bg-white rounded-lg shadow hover:bg-indigo-200 transition">
              {{ resume.filename }}
            </button>
          </li>
          {% endfor %}
        {% endif %}
      </ul>
    </aside>

    <!-- Overlay for mobile history sidebar -->
    <div id="mobileHistoryOverlay"
         class="fixed inset-0 bg-black bg-opacity-50 hidden z-30"
         onclick="toggleHistorySidebar(false)">
    </div>

    <!-- Mobile history sidebar -->
    <aside id="mobileHistorySidebar"
           class="bg-indigo-100 rounded-xl p-4 shadow-lg overflow-y-auto max-h-[80vh]
                  fixed top-20 bottom-12 left-0 w-64 z-40
                  transform -translate-x-full transition-transform duration-300 ease-in-out
                  md:hidden">
      <h2 class="text-xl font-semibold text-indigo-700 mb-4">Resume History</h2>
      <ul id="mobileResumeList" class="space-y-2">
        {% if user_data|length == 0 %}
          <li class="text-indigo-600 italic">No History, Upload your resume</li>
        {% else %}
          {% for resume in user_data %}
          <li>
            <button onclick="loadResume({{ resume.id }}); toggleHistorySidebar(false);"
                    class="w-full text-left px-3 py-2 bg-white rounded-lg shadow hover:bg-indigo-200 transition">
              {{ resume.filename }}
            </button>
          </li>
          {% endfor %}
        {% endif %}
      </ul>
    </aside>

    <!-- Resume Form -->
    <div class="bg-white shadow-2xl rounded-2xl p-10 w-full max-w-3xl md:ml-72">
      <div class="text-center mb-8">
        <h1 class="text-4xl font-bold text-indigo-700 mb-2">Smart CV Matcher</h1>
        <p class="text-gray-600">Upload your resume and paste a job description to find the best fit</p>
      </div>

      <form id="resumeForm" action="/process" method="post" enctype="multipart/form-data" class="space-y-6">
        <!-- Upload Resume -->
        <div>
          <label for="resume" class="block mb-2 text-sm font-medium text-gray-700">
            <i class="bi bi-upload"></i> Upload Resume (.pdf or .docx)
          </label>
          <input id="resume" type="file" name="resume" accept=".pdf,.docx"
                 class="w-full px-4 py-2 border border-gray-300 rounded-md shadow-sm" required>
        </div>

        <!-- Job Description -->
        <div>
          <label for="job_description" class="block mb-2 text-sm font-medium text-gray-700">
            <i class="bi bi-card-text"></i> Paste Job Description
          </label>
          <textarea id="job_description" name="job_description" rows="6"
                    class="w-full px-4 py-2 border border-gray-300 rounded-md shadow-sm"
                    placeholder="Enter job description here..." required></textarea>
        </div>

        <!-- Submit Button -->
        <div class="text-center">
          <button type="submit"
                  class="px-8 py-3 bg-indigo-600 text-white text-lg rounded-full font-semibold hover:bg-indigo-700 transition duration-300 shadow-lg">
            <i class="bi bi-arrow-right-circle"></i> Match CV
          </button>
        </div>
      </form>
    </div>
  </main>

  <script>
    async function loadResume(id) {
      try {
        const response = await fetch(`/get_resume/${id}`);
        const data = await response.json();

        if (data.error) {
          alert(data.error);
          return;
        }

        // Set job description only
        document.getElementById('job_description').value = data.job_description;

      } catch (error) {
        alert('Failed to load resume data');
        console.error(error);
      }
    }

    function toggleMenu() {
      const menu = document.getElementById("mobileMenu");
      menu.classList.toggle("hidden");
    }

    function confirmLogout() {
      if (confirm("Are you sure you want to logout?")) {
        window.location.href = "/logout";
      }
    }

    // Toggle mobile history sidebar visibility
    const historyToggleBtn = document.getElementById('historyToggleBtn');
    const navToggleBtn = document.getElementById('navToggleBtn');
    const mobileHistorySidebar = document.getElementById('mobileHistorySidebar');
    const mobileHistoryOverlay = document.getElementById('mobileHistoryOverlay');
    const mobileMenu = document.getElementById('mobileMenu');

    function toggleHistorySidebar(forceState) {
      const isVisible = !mobileHistorySidebar.classList.contains('-translate-x-full');
      let show = forceState !== undefined ? forceState : !isVisible;

      if (show) {
        mobileHistorySidebar.classList.remove('-translate-x-full');
        mobileHistoryOverlay.classList.remove('hidden');
      } else {
        mobileHistorySidebar.classList.add('-translate-x-full');
        mobileHistoryOverlay.classList.add('hidden');
      }
    }

    // Toggle nav menu on hamburger (list icon)
    navToggleBtn.addEventListener('click', () => {
      mobileMenu.classList.toggle('hidden');
      // Close history sidebar if open
      toggleHistorySidebar(false);
    });

    // Toggle history sidebar on mobile button menu (3 dots)
    historyToggleBtn.addEventListener('click', () => {
      toggleHistorySidebar();
      // Close nav menu if open
      mobileMenu.classList.add('hidden');
    });

    // Close history sidebar when clicking overlay
    mobileHistoryOverlay.addEventListener('click', () => {
      toggleHistorySidebar(false);
});

  </script>

</body>
</html>



<!--<!DOCTYPE html>-->
<!--<html lang="en">-->
<!--<head>-->
<!--  <meta charset="UTF-8">-->
<!--  <title>Smart CV Gap Analyzer</title>-->
<!--  <link rel="icon" type="image/png" href="{{ url_for('static', filename='images/favicon.png') }}">-->
<!--  <meta name="viewport" content="width=device-width, initial-scale=1.0">-->
<!--  <script src="https://cdn.tailwindcss.com"></script>-->
<!--  <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css" rel="stylesheet">-->
<!--  <style>-->
<!--    body {-->
<!--      background: linear-gradient(135deg, #667eea, #764ba2);-->
<!--      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;-->
<!--    }-->

<!--    header {-->
<!--      position: fixed;-->
<!--      top: 0;-->
<!--      left: 0;-->
<!--      width: 100%;-->
<!--      z-index: 100;-->
<!--      background: white;-->
<!--      box-shadow: 0 2px 6px rgba(0,0,0,0.1);-->
<!--    }-->

<!--    input[type="file"]::file-selector-button {-->
<!--      padding: 0.5rem 1rem;-->
<!--      background-color: #6366f1;-->
<!--      color: white;-->
<!--      border: none;-->
<!--      border-radius: 0.375rem;-->
<!--      cursor: pointer;-->
<!--    }-->
<!--  </style>-->
<!--</head>-->
<!--<body class="min-h-screen">-->

<!--&lt;!&ndash; Navbar &ndash;&gt;-->
<!--<header class="bg-white shadow py-3 px-4 sticky top-0 z-50">-->
<!--  <div class="container mx-auto flex justify-between items-center">-->
<!--    <h1 class="text-xl font-bold text-indigo-700">AI Career Assistant</h1>-->
<!--    <nav class="hidden md:flex space-x-6 text-indigo-700 font-semibold">-->
<!--      <a href="/" class="text-decoration-none"><i class="bi bi-house-door-fill"></i> Home</a>-->
<!--      <a href="#" title="Logout" onclick="confirmLogout()" class="text-red-600 hover:text-red-800">-->
<!--        <i class="bi bi-box-arrow-right"></i> Logout</a>-->
<!--    </nav>-->
<!--    <div class="md:hidden relative">-->
<!--      <button onclick="toggleMenu()" class="text-indigo-700 text-2xl"><i class="bi bi-list"></i></button>-->
<!--      <div id="mobileMenu" class="absolute right-0 mt-2 w-48 bg-white rounded-md shadow-lg hidden z-50">-->
<!--        <a href="/" class="block px-4 py-2 text-indigo-700 hover:bg-gray-100"><i class="bi bi-house-door-fill"></i> Home</a>-->
<!--        <a href="#" onclick="confirmLogout()" class="block px-4 py-2 text-red-600 hover:text-red-800">-->
<!--          <i class="bi bi-box-arrow-right"></i> Logout</a>-->
<!--      </div>-->
<!--    </div>-->
<!--  </div>-->
<!--</header>-->

<!--&lt;!&ndash; Main Content &ndash;&gt;-->
<!--<main class="flex px-4 pt-28 pb-12 space-x-6 justify-center">-->
<!--  &lt;!&ndash; Resume History &ndash;&gt;-->
<!--  <aside class="w-1/4 bg-indigo-100 rounded-xl p-4 shadow-lg overflow-y-auto max-h-[80vh]">-->
<!--    <h2 class="text-xl font-semibold text-indigo-700 mb-4">Resume History</h2>-->
<!--    <ul id="resumeList" class="space-y-2">-->
<!--      {% for resume in user_data %}-->
<!--      <li>-->
<!--        <button onclick="loadResume({{ resume.id }})"-->
<!--                class="w-full text-left px-3 py-2 bg-white rounded-lg shadow hover:bg-indigo-200 transition">-->
<!--          {{ resume.filename }}-->
<!--        </button>-->
<!--      </li>-->
<!--      {% endfor %}-->
<!--    </ul>-->
<!--  </aside>-->

<!--  &lt;!&ndash; Resume Form &ndash;&gt;-->
<!--  <div class="bg-white shadow-2xl rounded-2xl p-10 w-full max-w-3xl">-->
<!--    <div class="text-center mb-8">-->
<!--      <h1 class="text-4xl font-bold text-indigo-700 mb-2">Smart CV Matcher</h1>-->
<!--      <p class="text-gray-600">Upload your resume and paste a job description to find the best fit</p>-->
<!--    </div>-->

<!--    <form id="resumeForm" action="/process" method="post" enctype="multipart/form-data" class="space-y-6">-->
<!--      &lt;!&ndash; Upload Resume &ndash;&gt;-->
<!--      <div>-->
<!--        <label for="resume" class="block mb-2 text-sm font-medium text-gray-700">-->
<!--          <i class="bi bi-upload"></i> Upload Resume (.pdf or .docx)-->
<!--        </label>-->
<!--        <input id="resume" type="file" name="resume" accept=".pdf,.docx"-->
<!--               class="w-full px-4 py-2 border border-gray-300 rounded-md shadow-sm" required>-->
<!--      </div>-->

<!--      &lt;!&ndash; Job Description &ndash;&gt;-->
<!--      <div>-->
<!--        <label for="job_description" class="block mb-2 text-sm font-medium text-gray-700">-->
<!--          <i class="bi bi-card-text"></i> Paste Job Description-->
<!--        </label>-->
<!--        <textarea id="job_description" name="job_description" rows="6"-->
<!--                  class="w-full px-4 py-2 border border-gray-300 rounded-md shadow-sm"-->
<!--                  placeholder="Enter job description here..." required></textarea>-->
<!--      </div>-->

<!--      &lt;!&ndash; Submit Button &ndash;&gt;-->
<!--      <div class="text-center">-->
<!--        <button type="submit"-->
<!--                class="px-8 py-3 bg-indigo-600 text-white text-lg rounded-full font-semibold hover:bg-indigo-700 transition duration-300 shadow-lg">-->
<!--          <i class="bi bi-arrow-right-circle"></i> Match CV-->
<!--        </button>-->
<!--      </div>-->
<!--    </form>-->
<!--  </div>-->
<!--</main>-->

<!--<script>-->
<!--  function toggleMenu() {-->
<!--    const menu = document.getElementById("mobileMenu");-->
<!--    menu.classList.toggle("hidden");-->
<!--  }-->

<!--  function confirmLogout() {-->
<!--    if (confirm("Are you sure you want to logout?")) {-->
<!--      window.location.href = "/logout";-->
<!--    }-->
<!--  }-->

<!--  async function loadResume(id) {-->
<!--    try {-->
<!--      const response = await fetch(`/get_resume/${id}`);-->
<!--      const data = await response.json();-->

<!--      if (data.error) {-->
<!--        alert(data.error);-->
<!--        return;-->
<!--      }-->

<!--      // Set job description-->
<!--      document.getElementById('job_description').value = data.job_description;-->

<!--      // Removed code: Do not set the resume file input-->
<!--    } catch (error) {-->
<!--      alert('Failed to load resume data');-->
<!--      console.error(error);-->
<!--    }-->
<!--  }-->
<!--</script>-->


<!--</body>-->
<!--</html>-->








<!--<!DOCTYPE html>-->
<!--<html lang="en">-->
<!--<head>-->
<!--  <meta charset="UTF-8">-->
<!--  <title>Smart CV Gap Analyzer</title>-->
<!--  <link rel="icon" type="image/png" href="{{ url_for('static', filename='images/favicon.png') }}">-->
<!--  <meta name="viewport" content="width=device-width, initial-scale=1.0">-->

<!--  &lt;!&ndash; Tailwind CSS CDN &ndash;&gt;-->
<!--  <script src="https://cdn.tailwindcss.com"></script>-->

<!--  &lt;!&ndash; Bootstrap Icons &ndash;&gt;-->
<!--  <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css" rel="stylesheet">-->

<!--  <style>-->
<!--    body {-->
<!--      background: linear-gradient(135deg, #667eea, #764ba2);-->
<!--      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;-->
<!--    }-->

<!--    header {-->
<!--      position: fixed;-->
<!--      top: 0;-->
<!--      left: 0;-->
<!--      width: 100%;-->
<!--      z-index: 100;-->
<!--      background: white;-->
<!--      box-shadow: 0 2px 6px rgba(0,0,0,0.1);-->
<!--    }-->


<!--  </style>-->
<!--</head>-->
<!--<body class="min-h-screen">-->

<!--  &lt;!&ndash; Navbar &ndash;&gt;-->
<!--    <header class="bg-white shadow py-3 px-4 sticky top-0 z-50">-->
<!--    <div class="container mx-auto flex justify-between items-center">-->
<!--      <h1 class="text-xl font-bold text-indigo-700">AI Career Assistant</h1>-->

<!--      &lt;!&ndash; Desktop Nav &ndash;&gt;-->
<!--      <nav class="hidden md:flex space-x-6 text-indigo-700 fw-semibold">-->
<!--        <a href="/" class="text-decoration-none"><i class="bi bi-house-door-fill"></i> Home</a>-->
<!--        <a href="#" title="Logout" onclick="confirmLogout()" class="text-red-600 hover:text-red-800">-->
<!--          <i class="bi bi-box-arrow-right"></i>Logout</a>-->
<!--      </nav>-->

<!--      &lt;!&ndash; Hamburger Menu &ndash;&gt;-->
<!--      <div class="md:hidden relative">-->
<!--        <button onclick="toggleMenu()" class="text-indigo-700 text-2xl">-->
<!--          <i class="bi bi-list"></i>-->
<!--        </button>-->
<!--        <div id="mobileMenu" class="absolute right-0 mt-2 w-48 bg-white rounded-md shadow-lg hidden z-50">-->
<!--          <a href="/" class="block px-4 py-2 text-indigo-700 hover:bg-gray-100"><i class="bi bi-house-door-fill"></i> Home</a>-->
<!--          <a href="#" onclick="confirmLogout()" class="block px-4 py-2 text-red-600 hover:text-red-800">-->
<!--            <i class="bi bi-box-arrow-right"></i> Logout</a>-->
<!--        </div>-->
<!--      </div>-->
<!--    </div>-->
<!--  </header>-->

<!--  &lt;!&ndash; Main Section &ndash;&gt;-->
<!--  <main class="flex items-center justify-center px-4 pt-28 pb-12">-->
<!--    <div class="bg-white shadow-2xl rounded-2xl p-10 max-w-3xl w-full">-->
<!--      <div class="text-center mb-8">-->
<!--        <h1 class="text-4xl font-bold text-indigo-700 mb-2">Smart CV Matcher</h1>-->
<!--        <p class="text-gray-600">Upload your resume and paste a job description to find the best fit</p>-->
<!--      </div>-->

<!--      <form action="/process" method="post" enctype="multipart/form-data" class="space-y-6">-->
<!--        &lt;!&ndash; File Upload &ndash;&gt;-->
<!--        <div>-->
<!--          <label for="resume" class="block mb-2 text-sm font-medium text-gray-700">-->
<!--            <i class="bi bi-upload"></i> Upload Resume (.pdf or .docx)-->
<!--          </label>-->
<!--          <input type="file" name="resume" accept=".pdf,.docx"-->
<!--                 class="w-full px-4 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500" required>-->
<!--        </div>-->

<!--        &lt;!&ndash; Job Description &ndash;&gt;-->
<!--        <div>-->
<!--          <label for="job_description" class="block mb-2 text-sm font-medium text-gray-700">-->
<!--            <i class="bi bi-card-text"></i> Paste Job Description-->
<!--          </label>-->
<!--          <textarea name="job_description" rows="6"-->
<!--                    class="w-full px-4 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500"-->
<!--                    placeholder="Enter job description here..." required></textarea>-->
<!--        </div>-->

<!--        &lt;!&ndash; Submit &ndash;&gt;-->
<!--        <div class="text-center">-->
<!--          <button type="submit"-->
<!--                  class="px-8 py-3 bg-indigo-600 text-white text-lg rounded-full font-semibold hover:bg-indigo-700 transition duration-300 shadow-lg">-->
<!--            <i class="bi bi-arrow-right-circle"></i> Match CV-->
<!--          </button>-->
<!--        </div>-->
<!--      </form>-->
<!--    </div>-->
<!--  </main>-->

<!--  &lt;!&ndash; Scripts &ndash;&gt;-->
<!--  <script>-->
<!--    function toggleMenu() {-->
<!--      const menu = document.getElementById("mobileMenu");-->
<!--      menu.classList.toggle("hidden");-->
<!--    }-->

<!--    function confirmLogout() {-->
<!--      if (confirm("Are you sure you want to logout?")) {-->
<!--        window.location.href = "/logout";-->
<!--      }-->
<!--    }-->
<!--  </script>-->
<!--</body>-->
<!--</html>-->