<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Smart CV Gap Analyzer</title>
  <link rel="icon" type="image/png" href="{{ url_for('static', filename='images/favicon.png') }}" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <script src="https://cdn.tailwindcss.com"></script>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css" rel="stylesheet" />
  <style>
    body {
      background: linear-gradient(135deg, #667eea, #764ba2);
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    }

    header {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      z-index: 100;
      background: white;
      box-shadow: 0 2px 6px rgba(0, 0, 0, 0.1);
    }

    input[type="file"]::file-selector-button {
      padding: 0.5rem 1rem;
      background-color: #6366f1;
      color: white;
      border: none;
      border-radius: 0.375rem;
      cursor: pointer;
    }

    /* New styles for delete menu */
    .group:hover .hidden.md\:block {
      display: block !important;
    }

    .delete-menu {
      display: none;
      position: absolute;
      right: 0;
      top: 100%;
      margin-top: 0.25rem;
      width: 8rem;
      background: white;
      border-radius: 0.375rem;
      box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
      z-index: 50;
    }
  </style>
</head>
<body class="min-h-screen">

  <!-- Navbar -->
  <header class="bg-white shadow py-3 px-4 sticky top-0 z-50">
    <div class="container mx-auto flex justify-between items-center">
      <h1 class="text-xl font-bold text-indigo-700">AI Career Assistant</h1>

      <nav class="hidden md:flex space-x-6 text-indigo-700 font-semibold">
        <a href="/" class="text-decoration-none"><i class="bi bi-house-door-fill"></i> Home</a>
        <a href="#" title="Logout" onclick="confirmLogout()" class="text-red-600 hover:text-red-800">
          <i class="bi bi-box-arrow-right"></i> Logout
        </a>
      </nav>

      <div class="md:hidden flex items-center space-x-4">
        <button id="navToggleBtn" aria-label="Toggle Menu" class="text-indigo-700 text-2xl">
          <i class="bi bi-list"></i>
        </button>
        <button id="historyToggleBtn" aria-label="Toggle History" class="text-indigo-700 text-2xl">
          <i class="bi bi-three-dots-vertical"></i>
        </button>
      </div>

      <!-- Mobile navigation menu -->
      <div id="mobileMenu" class="absolute right-0 mt-12 w-48 bg-white rounded-md shadow-lg hidden z-50">
        <a href="/" class="block px-4 py-2 text-indigo-700 hover:bg-gray-100"><i class="bi bi-house-door-fill"></i> Home</a>
        <a href="#" onclick="confirmLogout()" class="block px-4 py-2 text-red-600 hover:text-red-800">
          <i class="bi bi-box-arrow-right"></i> Logout
        </a>
      </div>
    </div>
  </header>

  <!-- Main Content -->
  <main class="flex px-4 pt-28 pb-12 justify-center min-h-[80vh]">

    <!-- Resume History Sidebar -->
    <aside id="historySidebar"
           class="bg-indigo-100 rounded-xl p-4 shadow-lg overflow-y-auto max-h-[80vh]
                  w-64 fixed left-0 top-20 bottom-12
                  hidden md:block z-40">
      <h2 class="text-xl font-semibold text-indigo-700 mb-4">Resume History</h2>
      <ul id="resumeList" class="space-y-2">
        {% if user_data|length == 0 %}
          <li class="text-indigo-600 italic">No History, Upload your resume</li>
        {% else %}
          {% for resume in user_data %}
          <li class="flex items-center group relative">
            <button onclick="loadResume({{ resume.id }})"
                    class="flex-1 text-left px-3 py-2 bg-white rounded-lg shadow hover:bg-indigo-200 transition truncate">
              {{ resume.filename }}
            </button>
            <!-- Delete button for desktop -->
            <button onclick="toggleDeleteMenu(this, {{ resume.id }})"
                    class="ml-2 p-1 text-gray-500 hover:text-red-600 hidden md:block">
              <i class="bi bi-three-dots-vertical"></i>
            </button>
            <!-- Delete button for mobile -->
            <button onclick="toggleDeleteMenu(this, {{ resume.id }})"
                    class="ml-2 p-1 text-gray-500 hover:text-red-600 md:hidden">
              <i class="bi bi-three-dots-vertical"></i>
            </button>
            <!-- Delete menu -->
            <div class="delete-menu">
              <button onclick="confirmDeleteResume({{ resume.id }}, this)"
                      class="block w-full text-left px-3 py-2 text-red-600 hover:bg-red-50 rounded-md">
                <i class="bi bi-trash"></i> Delete
              </button>
            </div>
          </li>
          {% endfor %}
        {% endif %}
      </ul>
    </aside>

    <!-- Overlay for mobile history sidebar -->
    <div id="mobileHistoryOverlay"
         class="fixed inset-0 bg-black bg-opacity-50 hidden z-30"
         onclick="toggleHistorySidebar(false)">
    </div>

    <!-- Mobile history sidebar -->
    <aside id="mobileHistorySidebar"
           class="bg-indigo-100 rounded-xl p-4 shadow-lg overflow-y-auto max-h-[80vh]
                  fixed top-20 bottom-12 left-0 w-64 z-40
                  transform -translate-x-full transition-transform duration-300 ease-in-out
                  md:hidden">
      <h2 class="text-xl font-semibold text-indigo-700 mb-4">Resume History</h2>
      <ul id="mobileResumeList" class="space-y-2">
        {% if user_data|length == 0 %}
          <li class="text-indigo-600 italic">No History, Upload your resume</li>
        {% else %}
          {% for resume in user_data %}
          <li class="flex items-center group relative">
            <button onclick="loadResume({{ resume.id }}); toggleHistorySidebar(false);"
                    class="flex-1 text-left px-3 py-2 bg-white rounded-lg shadow hover:bg-indigo-200 transition truncate">
              {{ resume.filename }}
            </button>
            <button onclick="toggleDeleteMenu(this, {{ resume.id }})"
                    class="ml-2 p-1 text-gray-500 hover:text-red-600">
              <i class="bi bi-three-dots-vertical"></i>
            </button>
            <div class="delete-menu">
              <button onclick="confirmDeleteResume({{ resume.id }}, this)"
                      class="block w-full text-left px-3 py-2 text-red-600 hover:bg-red-50 rounded-md">
                <i class="bi bi-trash"></i> Delete
              </button>
            </div>
          </li>
          {% endfor %}
        {% endif %}
      </ul>
    </aside>

    <!-- Resume Form -->
    <div class="bg-white shadow-2xl rounded-2xl p-10 w-full max-w-3xl md:ml-72">
      <div class="text-center mb-8">
        <h1 class="text-4xl font-bold text-indigo-700 mb-2">Smart CV Matcher</h1>
        <p class="text-gray-600">Upload your resume and paste a job description to find the best fit</p>
      </div>

      <form id="resumeForm" action="/process" method="post" enctype="multipart/form-data" class="space-y-6">
        <!-- Upload Resume -->
        <div>
          <label for="resume" class="block mb-2 text-sm font-medium text-gray-700">
            <i class="bi bi-upload"></i> Upload Resume (.pdf or .docx)
          </label>
          <input id="resume" type="file" name="resume" accept=".pdf,.docx"
                 class="w-full px-4 py-2 border border-gray-300 rounded-md shadow-sm" required>
        </div>

        <!-- Job Description -->
        <div>
          <label for="job_description" class="block mb-2 text-sm font-medium text-gray-700">
            <i class="bi bi-card-text"></i> Paste Job Description
          </label>
          <textarea id="job_description" name="job_description" rows="6"
                    class="w-full px-4 py-2 border border-gray-300 rounded-md shadow-sm"
                    placeholder="Enter job description here..." required></textarea>
        </div>

        <!-- Submit Button -->
        <div class="text-center">
          <button type="submit"
                  class="px-8 py-3 bg-indigo-600 text-white text-lg rounded-full font-semibold hover:bg-indigo-700 transition duration-300 shadow-lg">
            <i class="bi bi-arrow-right-circle"></i> Match CV
          </button>
        </div>
      </form>
    </div>
  </main>

  <script>
  async function loadResume(id) {
    try {
      const response = await fetch(`/get_resume/${id}`);
      const data = await response.json();

      if (data.error) {
        alert(data.error);
        return;
      }

      document.getElementById('job_description').value = data.job_description;
    } catch (error) {
      alert('Failed to load resume data');
      console.error(error);
    }
  }

  function toggleMenu() {
    const menu = document.getElementById("mobileMenu");
    menu.classList.toggle("hidden");
  }

  function confirmLogout() {
    if (confirm("Are you sure you want to logout?")) {
      window.location.href = "/logout";
    }
  }

  // Toggle mobile history sidebar visibility
  const historyToggleBtn = document.getElementById('historyToggleBtn');
  const navToggleBtn = document.getElementById('navToggleBtn');
  const mobileHistorySidebar = document.getElementById('mobileHistorySidebar');
  const mobileHistoryOverlay = document.getElementById('mobileHistoryOverlay');
  const mobileMenu = document.getElementById('mobileMenu');

  function toggleHistorySidebar(forceState) {
    const isVisible = !mobileHistorySidebar.classList.contains('-translate-x-full');
    let show = forceState !== undefined ? forceState : !isVisible;

    if (show) {
      mobileHistorySidebar.classList.remove('-translate-x-full');
      mobileHistoryOverlay.classList.remove('hidden');
    } else {
      mobileHistorySidebar.classList.add('-translate-x-full');
      mobileHistoryOverlay.classList.add('hidden');
    }
  }

  // Toggle nav menu on hamburger (list icon)
  navToggleBtn.addEventListener('click', () => {
    mobileMenu.classList.toggle('hidden');
    toggleHistorySidebar(false);
  });

  // Toggle history sidebar on mobile button menu (3 dots)
  historyToggleBtn.addEventListener('click', () => {
    toggleHistorySidebar();
    mobileMenu.classList.add('hidden');
  });

  // Close history sidebar when clicking overlay
  mobileHistoryOverlay.addEventListener('click', () => {
    toggleHistorySidebar(false);
  });

  // âœ… FIXED toggleDeleteMenu function
  function toggleDeleteMenu(button, resumeId) {
    // Close all open menus
    document.querySelectorAll('.delete-menu').forEach(menu => {
      menu.style.display = 'none';
    });

    const li = button.closest('li');
    const menu = li.querySelector('.delete-menu');

    if (menu.style.display === 'block') {
      menu.style.display = 'none';
    } else {
      menu.style.display = 'block';

      const clickHandler = (e) => {
        if (!menu.contains(e.target) && !button.contains(e.target)) {
          menu.style.display = 'none';
          document.removeEventListener('click', clickHandler);
        }
      };

      setTimeout(() => {
        document.addEventListener('click', clickHandler);
      }, 100);
    }
  }

  // Confirm and delete resume
  async function confirmDeleteResume(resumeId, button) {
    if (confirm('Are you sure you want to delete this resume? This action cannot be undone.')) {
      try {
        const response = await fetch(`/delete_resume/${resumeId}`, {
          method: 'DELETE'
        });

        const data = await response.json();

        if (data.error) {
          alert(data.error);
          return;
        }

        // Remove the resume item from both desktop and mobile lists
        document.querySelectorAll(`li button[onclick="loadResume(${resumeId})"]`).forEach(btn => {
          btn.closest('li').remove();
        });

        // If no resumes left, show message
        const resumeLists = document.querySelectorAll('#resumeList, #mobileResumeList');
        let hasItems = false;

        resumeLists.forEach(list => {
          if (list.querySelector('li:not(.text-indigo-600)')) {
            hasItems = true;
          }
        });

        if (!hasItems) {
          resumeLists.forEach(list => {
            list.innerHTML = '<li class="text-indigo-600 italic">No History, Upload your resume</li>';
          });
        }

      } catch (error) {
        alert('Failed to delete resume');
        console.error(error);
      }
    }
  }
</script>

<!--  <script>-->
<!--    async function loadResume(id) {-->
<!--      try {-->
<!--        const response = await fetch(`/get_resume/${id}`);-->
<!--        const data = await response.json();-->

<!--        if (data.error) {-->
<!--          alert(data.error);-->
<!--          return;-->
<!--        }-->

<!--        document.getElementById('job_description').value = data.job_description;-->
<!--      } catch (error) {-->
<!--        alert('Failed to load resume data');-->
<!--        console.error(error);-->
<!--      }-->
<!--    }-->

<!--    function toggleMenu() {-->
<!--      const menu = document.getElementById("mobileMenu");-->
<!--      menu.classList.toggle("hidden");-->
<!--    }-->

<!--    function confirmLogout() {-->
<!--      if (confirm("Are you sure you want to logout?")) {-->
<!--        window.location.href = "/logout";-->
<!--      }-->
<!--    }-->

<!--    // Toggle mobile history sidebar visibility-->
<!--    const historyToggleBtn = document.getElementById('historyToggleBtn');-->
<!--    const navToggleBtn = document.getElementById('navToggleBtn');-->
<!--    const mobileHistorySidebar = document.getElementById('mobileHistorySidebar');-->
<!--    const mobileHistoryOverlay = document.getElementById('mobileHistoryOverlay');-->
<!--    const mobileMenu = document.getElementById('mobileMenu');-->

<!--    function toggleHistorySidebar(forceState) {-->
<!--      const isVisible = !mobileHistorySidebar.classList.contains('-translate-x-full');-->
<!--      let show = forceState !== undefined ? forceState : !isVisible;-->

<!--      if (show) {-->
<!--        mobileHistorySidebar.classList.remove('-translate-x-full');-->
<!--        mobileHistoryOverlay.classList.remove('hidden');-->
<!--      } else {-->
<!--        mobileHistorySidebar.classList.add('-translate-x-full');-->
<!--        mobileHistoryOverlay.classList.add('hidden');-->
<!--      }-->
<!--    }-->

<!--    // Toggle nav menu on hamburger (list icon)-->
<!--    navToggleBtn.addEventListener('click', () => {-->
<!--      mobileMenu.classList.toggle('hidden');-->
<!--      toggleHistorySidebar(false);-->
<!--    });-->

<!--    // Toggle history sidebar on mobile button menu (3 dots)-->
<!--    historyToggleBtn.addEventListener('click', () => {-->
<!--      toggleHistorySidebar();-->
<!--      mobileMenu.classList.add('hidden');-->
<!--    });-->

<!--    // Close history sidebar when clicking overlay-->
<!--    mobileHistoryOverlay.addEventListener('click', () => {-->
<!--      toggleHistorySidebar(false);-->
<!--    });-->

<!--    // Toggle delete menu visibility-->
<!--    function toggleDeleteMenu(button, resumeId) {-->
<!--      // Close all other open menus first-->
<!--      document.querySelectorAll('.delete-menu').forEach(menu => {-->
<!--        if (menu !== button.nextElementSibling) {-->
<!--          menu.style.display = 'none';-->
<!--        }-->
<!--      });-->

<!--      const menu = button.nextElementSibling;-->
<!--      if (menu.style.display === 'block') {-->
<!--        menu.style.display = 'none';-->
<!--      } else {-->
<!--        menu.style.display = 'block';-->

<!--        // Close when clicking elsewhere-->
<!--        const clickHandler = (e) => {-->
<!--          if (!menu.contains(e.target) && e.target !== button) {-->
<!--            menu.style.display = 'none';-->
<!--            document.removeEventListener('click', clickHandler);-->
<!--          }-->
<!--        };-->

<!--        setTimeout(() => {-->
<!--          document.addEventListener('click', clickHandler);-->
<!--        }, 100);-->
<!--      }-->
<!--    }-->

<!--    // Confirm and delete resume-->
<!--    async function confirmDeleteResume(resumeId, button) {-->
<!--      if (confirm('Are you sure you want to delete this resume? This action cannot be undone.')) {-->
<!--        try {-->
<!--          const response = await fetch(`/delete_resume/${resumeId}`, {-->
<!--            method: 'DELETE'-->
<!--          });-->

<!--          const data = await response.json();-->

<!--          if (data.error) {-->
<!--            alert(data.error);-->
<!--            return;-->
<!--          }-->

<!--          // Remove the resume item from both desktop and mobile lists-->
<!--          document.querySelectorAll(`li button[onclick="loadResume(${resumeId})"]`).forEach(btn => {-->
<!--            btn.closest('li').remove();-->
<!--          });-->

<!--          // If no resumes left, show message-->
<!--          const resumeLists = document.querySelectorAll('#resumeList, #mobileResumeList');-->
<!--          let hasItems = false;-->

<!--          resumeLists.forEach(list => {-->
<!--            if (list.querySelector('li:not(.text-indigo-600)')) {-->
<!--              hasItems = true;-->
<!--            }-->
<!--          });-->

<!--          if (!hasItems) {-->
<!--            resumeLists.forEach(list => {-->
<!--              list.innerHTML = '<li class="text-indigo-600 italic">No History, Upload your resume</li>';-->
<!--            });-->
<!--          }-->

<!--        } catch (error) {-->
<!--          alert('Failed to delete resume');-->
<!--          console.error(error);-->
<!--        }-->
<!--      }-->
<!--    }-->
<!--  </script>-->
</body>
</html>


<!--<!DOCTYPE html>-->
<!--<html lang="en">-->
<!--<head>-->
<!--  <meta charset="UTF-8">-->
<!--  <title>Smart CV Gap Analyzer</title>-->
<!--  <link rel="icon" type="image/png" href="{{ url_for('static', filename='images/favicon.png') }}">-->
<!--  <meta name="viewport" content="width=device-width, initial-scale=1.0">-->
<!--  <script src="https://cdn.tailwindcss.com"></script>-->
<!--  <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css" rel="stylesheet">-->
<!--  <style>-->
<!--    body {-->
<!--      background: linear-gradient(135deg, #667eea, #764ba2);-->
<!--      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;-->
<!--    }-->

<!--    header {-->
<!--      position: fixed;-->
<!--      top: 0;-->
<!--      left: 0;-->
<!--      width: 100%;-->
<!--      z-index: 100;-->
<!--      background: white;-->
<!--      box-shadow: 0 2px 6px rgba(0,0,0,0.1);-->
<!--    }-->

<!--    input[type="file"]::file-selector-button {-->
<!--      padding: 0.5rem 1rem;-->
<!--      background-color: #6366f1;-->
<!--      color: white;-->
<!--      border: none;-->
<!--      border-radius: 0.375rem;-->
<!--      cursor: pointer;-->
<!--    }-->
<!--  </style>-->
<!--</head>-->
<!--<body class="min-h-screen">-->

<!--&lt;!&ndash; Navbar &ndash;&gt;-->
<!--<header class="bg-white shadow py-3 px-4 sticky top-0 z-50">-->
<!--  <div class="container mx-auto flex justify-between items-center">-->
<!--    <h1 class="text-xl font-bold text-indigo-700">AI Career Assistant</h1>-->

<!--    &lt;!&ndash; Hamburger menu for Home & Logout &ndash;&gt;-->
<!--    <div class="md:hidden relative">-->
<!--      <button onclick="toggleMainMenu()" class="text-indigo-700 text-2xl"><i class="bi bi-list"></i></button>-->
<!--      <div id="mainMenu" class="absolute right-0 mt-2 w-48 bg-white rounded-md shadow-lg hidden z-50">-->
<!--        <a href="/" class="block px-4 py-2 text-indigo-700 hover:bg-gray-100"><i class="bi bi-house-door-fill"></i> Home</a>-->
<!--        <a href="#" onclick="confirmLogout()" class="block px-4 py-2 text-red-600 hover:text-red-800">-->
<!--          <i class="bi bi-box-arrow-right"></i> Logout</a>-->
<!--      </div>-->
<!--    </div>-->

<!--    &lt;!&ndash; Desktop Nav &ndash;&gt;-->
<!--    <nav class="hidden md:flex space-x-6 text-indigo-700 font-semibold">-->
<!--      <a href="/" class="text-decoration-none"><i class="bi bi-house-door-fill"></i> Home</a>-->
<!--      <a href="#" onclick="confirmLogout()" class="text-red-600 hover:text-red-800">-->
<!--        <i class="bi bi-box-arrow-right"></i> Logout</a>-->
<!--    </nav>-->
<!--  </div>-->
<!--</header>-->

<!--&lt;!&ndash; Main Content &ndash;&gt;-->
<!--<main class="flex flex-col md:flex-row px-4 pt-28 pb-12 space-y-6 md:space-y-0 md:space-x-6 justify-center">-->

<!--  &lt;!&ndash; Mobile Toggle for Resume History &ndash;&gt;-->
<!--  <div class="md:hidden flex justify-end">-->
<!--    <button onclick="toggleHistoryMenu()" class="text-white bg-indigo-700 px-4 py-2 rounded-lg shadow">-->
<!--      <i class="bi bi-clock-history"></i> Resume History-->
<!--    </button>-->
<!--  </div>-->

<!--  &lt;!&ndash; Resume History &ndash;&gt;-->
<!--  <aside id="historyPanel" class="md:block hidden md:w-1/4 bg-indigo-100 rounded-xl p-4 shadow-lg overflow-y-auto max-h-[80vh]">-->
<!--    <h2 class="text-xl font-semibold text-indigo-700 mb-4">Resume History</h2>-->
<!--    <ul id="resumeList" class="space-y-2">-->
<!--      {% if user_data %}-->
<!--        {% for resume in user_data %}-->
<!--        <li class="relative group">-->
<!--          <div class="flex items-center justify-between bg-white rounded-lg shadow px-3 py-2 hover:bg-indigo-200 transition">-->
<!--            <button onclick="loadResume({{ resume.id }})" class="text-left w-full truncate">-->
<!--              {{ resume.filename }}-->
<!--            </button>-->
<!--            <div class="relative">-->
<!--              <button onclick="toggleResumeMenu({{ resume.id }})" class="text-xl text-indigo-700 hover:text-indigo-900 focus:outline-none">-->
<!--                <i class="bi bi-three-dots-vertical"></i>-->
<!--              </button>-->
<!--              <div id="resumeMenu-{{ resume.id }}" class="absolute right-0 mt-2 w-32 bg-white border rounded shadow-md hidden z-50">-->
<!--                <button onclick="confirmDeleteResume({{ resume.id }})" class="w-full text-left px-4 py-2 text-red-600 hover:bg-gray-100">-->
<!--                  <i class="bi bi-trash"></i> Delete-->
<!--                </button>-->
<!--              </div>-->
<!--            </div>-->
<!--          </div>-->
<!--        </li>-->
<!--        {% endfor %}-->
<!--      {% else %}-->
<!--        <li class="text-center text-gray-600 font-semibold italic">No History, Upload your resume</li>-->
<!--      {% endif %}-->
<!--    </ul>-->
<!--  </aside>-->

<!--  &lt;!&ndash; Resume Form &ndash;&gt;-->
<!--  <div class="bg-white shadow-2xl rounded-2xl p-10 w-full max-w-3xl">-->
<!--    <div class="text-center mb-8">-->
<!--      <h1 class="text-4xl font-bold text-indigo-700 mb-2">Smart CV Matcher</h1>-->
<!--      <p class="text-gray-600">Upload your resume and paste a job description to find the best fit</p>-->
<!--    </div>-->

<!--    <form id="resumeForm" action="/process" method="post" enctype="multipart/form-data" class="space-y-6">-->
<!--      &lt;!&ndash; Upload Resume &ndash;&gt;-->
<!--      <div>-->
<!--        <label for="resume" class="block mb-2 text-sm font-medium text-gray-700">-->
<!--          <i class="bi bi-upload"></i> Upload Resume (.pdf or .docx)-->
<!--        </label>-->
<!--        <input id="resume" type="file" name="resume" accept=".pdf,.docx"-->
<!--               class="w-full px-4 py-2 border border-gray-300 rounded-md shadow-sm" required>-->
<!--      </div>-->

<!--      &lt;!&ndash; Job Description &ndash;&gt;-->
<!--      <div>-->
<!--        <label for="job_description" class="block mb-2 text-sm font-medium text-gray-700">-->
<!--          <i class="bi bi-card-text"></i> Paste Job Description-->
<!--        </label>-->
<!--        <textarea id="job_description" name="job_description" rows="6"-->
<!--                  class="w-full px-4 py-2 border border-gray-300 rounded-md shadow-sm"-->
<!--                  placeholder="Enter job description here..." required></textarea>-->
<!--      </div>-->

<!--      &lt;!&ndash; Submit Button &ndash;&gt;-->
<!--      <div class="text-center">-->
<!--        <button type="submit"-->
<!--                class="px-8 py-3 bg-indigo-600 text-white text-lg rounded-full font-semibold hover:bg-indigo-700 transition duration-300 shadow-lg">-->
<!--          <i class="bi bi-arrow-right-circle"></i> Match CV-->
<!--        </button>-->
<!--      </div>-->
<!--    </form>-->
<!--  </div>-->
<!--</main>-->

<!--&lt;!&ndash; Scripts &ndash;&gt;-->
<!--<script>-->
<!--  // Toggle hamburger menu-->
<!--  function toggleMainMenu() {-->
<!--    document.getElementById("mainMenu").classList.toggle("hidden");-->
<!--  }-->

<!--  function toggleHistoryMenu() {-->
<!--    const panel = document.getElementById("historyPanel");-->
<!--    panel.classList.toggle("hidden");-->
<!--  }-->

<!--  function confirmLogout() {-->
<!--    if (confirm("Are you sure you want to logout?")) {-->
<!--      window.location.href = "/logout";-->
<!--    }-->
<!--  }-->

<!--  // Track currently open menu-->
<!--  let openResumeMenu = null;-->

<!--  function toggleResumeMenu(id) {-->
<!--    const menu = document.getElementById(`resumeMenu-${id}`);-->

<!--    // Close previous menu-->
<!--    if (openResumeMenu && openResumeMenu !== menu) {-->
<!--      openResumeMenu.classList.add("hidden");-->
<!--    }-->

<!--    // Toggle current-->
<!--    menu.classList.toggle("hidden");-->
<!--    openResumeMenu = menu.classList.contains("hidden") ? null : menu;-->
<!--  }-->

<!--  // Close delete menus on outside click-->
<!--  document.addEventListener("click", function (event) {-->
<!--    const isClickInsideMenu = event.target.closest(".group");-->
<!--    if (!isClickInsideMenu && openResumeMenu) {-->
<!--      openResumeMenu.classList.add("hidden");-->
<!--      openResumeMenu = null;-->
<!--    }-->
<!--  });-->

<!--  // Delete confirmation-->
<!--  function confirmDeleteResume(id) {-->
<!--    if (confirm("Are you sure you want to delete this resume? This action cannot be undone.")) {-->
<!--      fetch(`/delete_resume/${id}`, { method: 'DELETE' })-->
<!--        .then(res => res.json())-->
<!--        .then(data => {-->
<!--          if (data.success) {-->
<!--            alert('Resume deleted successfully.');-->
<!--            location.reload();-->
<!--          } else {-->
<!--            alert(data.error || 'Failed to delete resume.');-->
<!--          }-->
<!--        })-->
<!--        .catch(err => {-->
<!--          alert('Error deleting resume.');-->
<!--          console.error(err);-->
<!--        });-->
<!--    }-->
<!--  }-->

<!--  // Load resume job description into textarea-->
<!--  function loadResume(id) {-->
<!--    fetch(`/get_resume/${id}`)-->
<!--      .then(response => response.json())-->
<!--      .then(data => {-->
<!--        if (data && data.job_description) {-->
<!--          document.getElementById("job_description").value = data.job_description;-->
<!--        } else {-->
<!--          alert("Failed to load job description.");-->
<!--        }-->
<!--      })-->
<!--      .catch(err => {-->
<!--        alert("Error loading resume.");-->
<!--        console.error(err);-->
<!--      });-->
<!--  }-->
<!--</script>-->

<!--</body>-->
<!--</html>-->







